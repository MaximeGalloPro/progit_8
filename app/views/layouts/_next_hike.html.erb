<div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-4">
    <% todays_hike = Hike.todays_hike %>
    <div class="bg-slate-800 rounded-2xl shadow-2xl border border-slate-700 p-6 mb-6">
        <div class="flex flex-col lg:flex-row gap-4">
            <%# En-tête %>
            <div class="flex items-center gap-3">
                <i class="icon icon-calendar-day text-blue-400 text-xl"></i>
                <strong class="text-lg text-white">
                    <% if todays_hike&.hiking_date == Date.current %>
                        Randonnée du jour
                    <% else %>
                        Prochaine randonnée
                        <% if todays_hike&.hiking_date.present? %>
                            (<%= l(todays_hike.hiking_date, format: :long) %>)
                        <% end %>
                    <% end %>
                </strong>
                <% if todays_hike&.difficulty_text.present? %>
                    <span class="inline-flex items-center rounded-lg bg-blue-500/20 px-3 py-1 text-sm font-medium text-blue-300 border border-blue-500/30">
                        <%= todays_hike.difficulty_text %>
                    </span>
                <% end %>
            </div>

            <% if todays_hike %>
                <%# Informations détaillées %>
                <div class="flex flex-wrap gap-4 items-center flex-grow">
                    <% if todays_hike.starting_point.present? %>
                        <div class="flex items-center gap-2">
                            <i class="icon icon-map-marker-alt text-slate-400"></i>
                            <span class="text-slate-300"><%= todays_hike.starting_point %></span>
                        </div>
                    <% end %>

                    <% if todays_hike.departure_time.present? %>
                        <div class="flex items-center gap-2">
                            <i class="icon icon-clock text-slate-400"></i>
                            <span class="text-slate-300"><%= todays_hike.departure_time %></span>
                        </div>
                    <% end %>

                    <% if todays_hike.member_name.present? %>
                        <div class="flex items-center gap-2">
                            <i class="icon icon-user text-slate-400"></i>
                            <span class="text-slate-300"><%= todays_hike.member_name %></span>
                        </div>
                    <% end %>

                    <% if todays_hike.distance_km.present? %>
                        <div class="flex items-center gap-2">
                            <i class="icon icon-route text-slate-400"></i>
                            <span class="text-slate-300"><%= todays_hike.distance_km %> km</span>
                        </div>
                    <% end %>

                    <% if todays_hike.elevation_gain.present? %>
                        <div class="flex items-center gap-2">
                            <i class="icon icon-mountain text-slate-400"></i>
                            <span class="text-slate-300"><%= todays_hike.elevation_gain %>m D+</span>
                        </div>
                    <% end %>

                    <% if todays_hike.carpooling_cost.present? %>
                        <div class="flex items-center gap-2">
                            <i class="icon icon-car text-slate-400"></i>
                            <span class="text-slate-300"><%= todays_hike.carpooling_cost %> €</span>
                        </div>
                    <% end %>

                    <% if todays_hike.openrunner_ref.present? && todays_hike.openrunner_ref != "0" %>
                        <div class="ml-auto">
                            <%= link_to "https://www.openrunner.com/route-details/#{todays_hike.openrunner_ref}",
                                        class: "rounded-lg bg-gradient-to-r from-blue-600 to-blue-500 px-4 py-2 text-white text-sm shadow-lg hover:from-blue-500 hover:to-blue-400 transition-all flex items-center gap-2",
                                        target: "_blank" do %>
                                <i class="icon icon-map"></i>
                                <span>OpenRunner</span>
                            <% end %>
                        </div>
                    <% end %>
                </div>
            <% else %>
                <span class="text-slate-400 flex items-center gap-2">
                    <i class="icon icon-info-circle"></i>
                    Aucune randonnée programmée
                </span>
            <% end %>
        </div>
    </div>
</div>
